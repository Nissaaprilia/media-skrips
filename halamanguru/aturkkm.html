<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Penjumlahan dan Pengurangan Bilangan Pecahan</title>

    <!-- Boxiocns CDN Link -->
    <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
    <!-- Matjax -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- Bootstrap Icon-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>

    <!-- Javascript -->
    <script type="module" src="../halamanguru/jsguru/akunguru.js"></script>
    <script type="module" src="../halamanguru/jsguru/datasiswa.js"></script>

    <!-- My CSS -->
    <link rel="stylesheet" href="../css/halguru.css" />
    <link rel="stylesheet" href="/css/datasiswa.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

    <!-- ALert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>

  <!-- JS Tables -->
  <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/dataTables.bootstrap5.min.js"></script>

  <!-- CSS Tables -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" />

  <body style="display: flex; flex-direction: column">
    <input type="checkbox" id="check" />
    <label for="check">
      <i class="fas fa-bars" id="btn"></i>
      <i class="fas fa-times" id="cancel"></i>
    </label>

    <!-- Sidebar-->
    <nav class="sidebar">
      <header><b>ADMIN GURU</b></header>
      <div class="scrollbox">
        <div class="scrollbox-inner">
          <ul style="padding: 0">
            <li>
              <a class="active" href="#"><i class="fa-solid fa-book-bookmark"></i>&nbsp;Data Siswa</a>
            </li>

            <li>
              <a href="../halamanguru/nilaikuis.html"><i class="bi bi-clipboard2-check-fill"></i>&nbsp;Nilai Kuis</a>
            </li>

            <li>
              <a href="../halamanguru/nilaievaluasi.html"><i class="bi bi-clipboard2-check-fill"></i>&nbsp;Nilai Evaluasi</a>
            </li>
            <li>
              <a href="./aturkkm.html"><i class="fa-solid fa-house"></i>&nbsp;Atur KKM</a>
            </li>
            <li>
              <a href="./loginguru.html"><i class="fa-solid fa-house"></i>&nbsp;Logout</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- Akhir Sidebar -->
    <section>
      <!-- Header -->
      <div id="header">
        <div class="username">
          <span>
            <img src="/img/guruimg/idcard.png" width="50px" alt="" />
          </span>
          <span><div id="userguru"></div></span>
        </div>
      </div>

      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
          <!-- Topbar -->
          <nav class="navbar navbar-expand" style="background-color: #d48166">
            <!-- Sidebar Toggle (Topbar) -->
            <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
              <i class="fa fa-magnet"></i>
            </button>

            <!-- Page Heading -->
            <div class="d-sm-flex align-items-center justify-content-between" style="color: #000; font-size: 50px; font-family: lucida sans">Halaman Guru</div>
          </nav>
          <!-- End of Topbar -->

          <!-- Begin Page Content -->
          <div class="container-fluid" style="background-color: #ffdead">
            <!-- Content Row -->
            <div class="container">
              <div class="row" style="height: 100%; width: 100%">
                <div class="mt-4 col-sm border border-dark isicontent" style="background-color: #fdefeb">
                  <div class="h5 font-weight-bold">
                    <div class="card text-white mb-3" style="background-color: #1a2c42">
                      <div class="card-body">
                        <h5 class="card-title">
                          <div class="text-truncate text-center" style="font-family: lucida sans; font-size: 35px">Pengaturan Kuis/Evaluasi dan KKM</div>
                        </h5>
                      </div>
                    </div>

                    <div class="card-body">
                      <div class="main">
                        <br />
                        <section class="section dashboard">
                          <div class="main2">
                            <br />
                            <div class="table-responsive">
                              <center></center>
                              <table class="table table-bordered table-sm">
                                <thead class="table table-bordered" style="background-color: #d48166; color: black; font-family: lucida sans">
                                  <tr>
                                    <th class="text-center" scope="col">Halaman</th>
                                    <th class="text-center" scope="col">Kontrol</th>
                                  </tr>
                                </thead>

                                <tbody>
                                  <tr style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                    <td><p>Kuis 1</p></td>

                                    <td style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                      <span id="matiquiz1"><input type="radio" id="mati1" name="kontrol1" value="0" /> <label for="mati1">Buka</label></span>
                                      <span id="aktifquiz1">
                                        <input type="radio" id="aktif1" name="kontrol1" value="1" />
                                        <label for="aktif1">Tutup</label></span
                                      >
                                    </td>
                                  </tr>
                                  <tr style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                    <td><p>Kuis 2</p></td>
                                    <td style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                      <span id="matiquiz2"><input type="radio" id="mati2" name="kontrol2" value="0" /> <label for="mati2">Buka</label></span>
                                      <span id="aktifquiz2">
                                        <input type="radio" id="aktif2" name="kontrol2" value="1" />
                                        <label for="aktif2">Tutup</label></span
                                      >
                                    </td>
                                  </tr>
                                  <tr style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                    <td><p>Evaluasi</p></td>
                                    <td style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                      <span id="matikuis1"><input type="radio" id="mati" name="kontrol" value="0" /> <label for="mati">Buka</label></span>
                                      <span id="aktifkuis1">
                                        <input type="radio" id="aktif" name="kontrol" value="1" />
                                        <label for="aktif">Tutup</label></span
                                      >
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>

                            <div class="table-responsive">
                              <table class="table table-bordered table-sm">
                                <thead class="table table-bordered" style="background-color: #d48166; color: black; font-family: lucida sans">
                                  <tr>
                                    <th class="text-center" scope="col">Nomor</th>
                                    <th class="text-center" scope="col">Atur KKM Kuis atau Evaluasi</th>

                                    <th class="text-center" scope="col">KKM Saat Ini</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                    <th class="text-center" scope="row">1</th>
                                    <td>
                                      <button type="button" class="btn btn-light" data-toggle="modal" data-target="#modalKuis1" style="background-color: #ffdead; border-radius: 5px; color: black">
                                        <i class="fas fa-fw fa-edit"></i>Atur
                                      </button>
                                      Kuis 1
                                    </td>
                                    <td>
                                      <center><div class="kkm1">75</div></center>
                                    </td>
                                  </tr>
                                  <tr style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                    <th class="text-center" scope="row">2</th>
                                    <td>
                                      <button type="button" class="btn btn-light" data-toggle="modal" data-target="#modalKuis2" style="background-color: #ffdead; border-radius: 5px; color: black">
                                        <i class="fas fa-fw fa-edit"></i>Atur
                                      </button>
                                      Kuis 2
                                    </td>
                                    <td>
                                      <center><div class="kkm2">75</div></center>
                                    </td>
                                  </tr>
                                  <tr style="background-color: #1a2c42; color: white; font-family: lucida sans">
                                    <th class="text-center" scope="row">3</th>
                                    <td>
                                      <button type="button" class="btn btn-light" data-toggle="modal" data-target="#modalKuis3" style="background-color: #ffdead; border-radius: 5px; color: black">
                                        <i class="fas fa-fw fa-edit"></i>Atur
                                      </button>
                                      Evaluasi
                                    </td>
                                    <td>
                                      <center><div class="kkm3">75</div></center>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                            </div>
                            <br />
                          </div>
                        </section>
                      </div>
                      <!-- Modal Kuis 1-->
                      <div class="modal fade" id="modalKuis1" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" style="display: none" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header" style="background-color: #1a2c42">
                              <h5 class="modal-title text-white" id="staticBackdropLabel">Edit KKM Kuis 1</h5>
                              <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                              </button>
                            </div>
                            <div class="modal-body" style="background-color: #ffdead">
                              <div class="form-group row">
                                <label for="inputEmail3" class="col-sm-2 col-form-label">KKM</label>
                                <div class="col-sm-10">
                                  <input type="number" class="form-control editKKM1" id="kkm1" />
                                </div>
                              </div>
                            </div>
                            <div class="modal-footer" style="background-color: #1a2c42">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                              <button type="button" class="btn" style="background-color: #d48166; color: black" id="setKKM1" data-dismiss="modal">Simpan</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Modal Kuis 2-->
                      <div class="modal fade" id="modalKuis2" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header" style="background-color: #1a2c42">
                              <h5 class="modal-title text-white" id="staticBackdropLabel">Edit KKM Kuis 2</h5>
                              <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                              </button>
                            </div>
                            <div class="modal-body" style="background-color: #ffdead">
                              <div class="form-group row">
                                <label for="inputEmail3" class="col-sm-2 col-form-label">KKM</label>
                                <div class="col-sm-10">
                                  <input type="number" class="form-control editKKM2" id="kkm2" />
                                </div>
                              </div>
                            </div>
                            <div class="modal-footer" style="background-color: #1a2c42">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                              <button type="button" class="btn" style="background-color: #d48166; color: black" id="setKKM2" data-dismiss="modal">Simpan</button>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Modal Kuis 3-->
                      <div class="modal fade" id="modalKuis3" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog">
                          <div class="modal-content">
                            <div class="modal-header" style="background-color: #1a2c42">
                              <h5 class="modal-title text-white" id="staticBackdropLabel">Edit KKM Evaluasi</h5>
                              <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span>
                              </button>
                            </div>
                            <div class="modal-body" style="background-color: #ffdead">
                              <div class="form-group row">
                                <label for="inputEmail3" class="col-sm-2 col-form-label">KKM</label>
                                <div class="col-sm-10">
                                  <input type="number" class="form-control editKKM3" id="kkm3" />
                                </div>
                              </div>
                            </div>
                            <div class="modal-footer" style="background-color: #1a2c42">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                              <button type="button" class="btn" style="background-color: #d48166; color: black" id="setKKM3" data-dismiss="modal">Simpan</button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <br />
                  <nav aria-label="...">
                    <ul class="pagination">
                      <li class="page-item disabled" id="btnprev"></li>
                      <center>
                        <a class="btn text-white ml-2" style="background-color: #1a2c42; font-family: lucida sans; font-size: 20px; border-radius: 10px" id="mnext" href="https://medanmagnetikkk.netlify.app/HasilBelajar.html"
                          >Halaman Sebelumnya</a
                        >
                      </center>
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>
          <a class="scroll-to-top rounded" href="https://medanmagnetikkk.netlify.app/aturkkm#page-top">
            <i class="fas fa-angle-up"></i>
          </a>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/jquery.min.js.download"></script>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/bootstrap.bundle.min.js.download"></script>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/sbadmin2.js.download"></script>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/kontrol.js.download" type="module"></script>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/bootstrap.bundle.min.js(1).download" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/jquery.min.js(1).download"></script>
          <script src="./Hasil Lembar Kerja __ Halaman Guru_files/polyfill.min.js.download"></script>
          <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-app.js";
            import { getDatabase, ref, onValue, set, update } from "https://www.gstatic.com/firebasejs/9.12.1/firebase-database.js";
            // TODO: Add SDKs for Firebase products that you want to use
            // https://firebase.google.com/docs/web/setup#available-libraries

            // Your web app's Firebase configuration
            const firebaseConfig = {
              apiKey: "AIzaSyBao_sbYCHawUpfWf1w7kpeCd-p658afBY",
              authDomain: "medanmagnetik-a9cd4.firebaseapp.com",
              databaseURL: "https://medanmagnetik-a9cd4-default-rtdb.firebaseio.com",
              projectId: "medanmagnetik-a9cd4",
              storageBucket: "medanmagnetik-a9cd4.appspot.com",
              messagingSenderId: "285660468832",
              appId: "1:285660468832:web:579d68ef9d6d73ab229505",
            };
            // Initialize Firebase
            const app = initializeApp(firebaseConfig);

            //--------------MENDAPATKAN NAMA USER--------------
            let userlink = document.getElementById("userlink");
            let namaUser = sessionStorage.getItem("nama");
            function getNama() {
              if (namaUser == null) {
                alert("Maaf, kamu harus login lebih dulu");
                window.location = "loginguru.html";
              } else {
                userlink.innerText = namaUser;
              }
            }
            getNama();

            let idnya = [];

            // const dbkkm = db.ref("kkm").on("value", handleSuccess, handleError);

            let getKKM;
            function handleSuccess(items) {
              getKKM = items.val();

              let kkm1 = getKKM[0]["kkm"];
              let kkm2 = getKKM[1]["kkm"];
              let kkm3 = getKKM[2]["kkm"];

              var kkm1html = document.querySelector(".kkm1");
              kkm1html.innerHTML = kkm1;

              var editkkm1 = document.querySelector(".editKKM1");
              editkkm1.value = kkm1;

              var kkm2html = document.querySelector(".kkm2");
              kkm2html.innerHTML = kkm2;

              var editkkm2 = document.querySelector(".editKKM2");
              editkkm2.value = kkm2;

              var kkm3html = document.querySelector(".kkm3");
              kkm3html.innerHTML = kkm3;

              var editkkm3 = document.querySelector(".editKKM3");
              editkkm3.value = kkm3;
            }

            function handleError(eror) {
              console.log(eror);
            }

            setKKM1.addEventListener("click", (e) => {
              const db = getDatabase();
              const kkminput = document.getElementById("kkm1").value;

              // var task = {
              //   id: 0,
              //   kkm: kkminput,
              // };
              //
              // let database = ref(db, "kkm/" + 0);
              // database.set(task);

              set(ref(db, "kkm/" + 0), {
                id: 0,
                kkm: kkminput,
              });
            });

            setKKM2.addEventListener("click", (e) => {
              const kkminput = document.getElementById("kkm2").value;
              const db = getDatabase();
              // set(ref(db, "kkm/" + 1), {
              //   id: 1,
              //   kkm: kkminput,
              // });
              set(ref(db, "kkm/" + 1), {
                id: 0,
                kkm: kkminput,
              });
            });

            setKKM3.addEventListener("click", (e) => {
              const kkminput = document.getElementById("kkm3").value;
              const db = getDatabase();
              // set(ref(db, "kkm/" + 2), {
              //   id: 2,
              //   kkm: kkminput,
              // });
              set(ref(db, "kkm/" + 2), {
                id: 0,
                kkm: kkminput,
              });
            });
            logout.addEventListener("click", (e) => {
              sessionStorage.removeItem("password");
              sessionStorage.removeItem("nama");
              window.location = "loginguru.html";
            });

            console.log("asd");

            // kontrol evaluasi
            let tutupEvaluasi = document.getElementById("aktifkuis1");
            tutupEvaluasi.addEventListener("click", function () {
              // tutup
              const db = getDatabase();
              update(ref(db, "kontrolkuis/"), {
                evaluasi: false,
              });
            });

            let bukaEvaluasi = document.getElementById("matikuis1");
            bukaEvaluasi.addEventListener("click", function () {
              // buka
              const db = getDatabase();
              update(ref(db, "kontrolkuis/"), {
                evaluasi: true,
              });
            });
            // kontrol kuis2
            let tutupKuis2 = document.getElementById("aktifquiz2");
            tutupKuis2.addEventListener("click", function () {
              // tutup
              const db = getDatabase();
              update(ref(db, "kontrolkuis/"), {
                kuis2: false,
              });
            });

            let bukaKuis2 = document.getElementById("matiquiz2");
            bukaKuis2.addEventListener("click", function () {
              // buka
              const db = getDatabase();
              update(ref(db, "kontrolkuis/"), {
                kuis2: true,
              });
            });
            // kontrol kuis1
            let tutupKuis1 = document.getElementById("aktifquiz1");
            tutupKuis1.addEventListener("click", function () {
              // tutup
              const db = getDatabase();
              update(ref(db, "kontrolkuis/"), {
                kuis1: false,
              });
            });

            let bukaKuis1 = document.getElementById("matiquiz1");
            bukaKuis1.addEventListener("click", function () {
              // buka
              const db = getDatabase();
              update(ref(db, "kontrolkuis/"), {
                kuis1: true,
              });
            });

            const db = getDatabase();
            onValue(ref(db, "kontrolkuis"), (snapshot) => {
              const data = snapshot.val();
              if (data.kuis1 === true) {
                bukaKuis1.querySelector("input").checked = true;
              } else {
                tutupKuis1.querySelector("input").checked = true;
                console.log("bbb");
              }

              if (data.kuis2 === true) {
                bukaKuis2.querySelector("input").checked = true;
              } else {
                tutupKuis2.querySelector("input").checked = true;
                console.log("bbb");
              }
              if (data.evaluasi === true) {
                bukaEvaluasi.querySelector("input").checked = true;
              } else {
                tutupEvaluasi.querySelector("input").checked = true;
                console.log("bbb");
              }
            });

            onValue(ref(db, "kkm"), (snapshot) => {
              handleSuccess(snapshot);
            });
          </script>
        </div>
      </div>
    </section>
  </body>
</html>
